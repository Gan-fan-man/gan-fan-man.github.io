---
layout: post
title: 家庭基础网络管理入门2
date: 2025-04-18 20:10 +0800
last_modified_at: 2025-04-20 20:30:00 +0800
categories: [教学]

tags: [科技,科普]
toc:  true
---
什么是网络七层架构? 路由器有哪些功能? DNS服务器是什么? IP是什么?
{: .message }

本文是家庭基础网络管理入门的第二篇文章 主要介绍五点  
1. 什么是网络七层架构?  
2. 路由器有哪些功能?  
3. DNS服务器是什么?  
不废话 直接进入正题 

## 网络七层架构(ISO/OSI协议参考模型)

网络七层架构 也称为ISO/OSI协议参考模型 是一种网络通信协议的分层模型  它将网络通信过程分为七个层次 每个层次都有其特定的功能和协议  以下是七层架构的详细介绍:  

> 物理层(Physical Layer): 定义了网络设备之间的物理连接和数据传输的电气特性 例如网线 Wi-Fi等  
>
> 数据链路层(Data Link Layer): 负责将数据封装成帧 并提供错误检测和纠错机制 例如以太网 WLAN等  
>
> 网络层(Network Layer): 负责将数据从源节点路由到目标节点 包括IP地址 路由选择等 例如IP协议  
>
> 传输层(Transport Layer): 提供可靠的数据传输服务 包括数据分段 重组 错误检测和纠错等 例如TCP UDP协议  
>
> 会话层(Session Layer): 负责建立 维护和终止网络连接 包括会话建立 数据交换等 例如NetBIOS SSH等  
>
> 表示层(Presentation Layer): 负责数据格式的转换 压缩和加密等 例如SSL/TLS MIME等  
>
> 应用层(Application Layer): 提供各种网络应用服务 包括HTTP FTP SMTP等协议  

这种分层结构使得网络通信变得更为模块化和可扩展 各个层次之间可以独立发展和改进 而不影响其他层次的功能  

让我们对以上内容进行阐述 以便于你能更高的理解其含义  

物理层(Physical Layer)
> 物理层是网络七层架构中的最底层 也就是硬件端 这一层负责物理层面上的信息传输  
> 网线 网卡 光纤 交换机 路由器 等硬件设施都属于物理层的内容 上一期我们讲到的 DNS服务器 网站服务器 等 都属于物理层的结构  
> 物理层主要决定了信号传输的方式 所以WI-FI 也属于物理层 虽然肉眼看不见 但是WI-FI本质上也是一种信号传输介质

数据链路层(Data Link Layer)
> 数据链路层是网络七层架构中的第二层 这一层负责信号的封装传输 流量控制 访问控制 地址解析  
> 数据链路层主要处理的是各种协议和标准 负责将网络层交下来的数据封装成帧 并在相邻的两个设备之间进行传输  
> 数据链路层的协议和标准包括以太网 Wi-Fi PPP HDLC SLIP等

网络层(Network Layer)
> 网络层是网络七层架构中的第三层 这一层负责将数据从源端路由到目的端 选择最合适的路径 并确保数据包能够在互联网上进行传递  
> 窗口控制 流量控制 缓冲区控制 距离矢量算法 链路状态算法 最短路径算法 都是网络层的负责内容
> 网络层的协议和标准包括IP ICMP IGMP OSPF RIP等

传输层(Transport Layer)
> 传输层是网络七层架构中的第四层 这一层负责为应用程序提供可靠的数据传输服务 将数据从源端应用程序传递到目的端应用程序 确保数据的正确传递和可靠性  
> 传输层的可靠性保证包括确认机制 重传机制 校验和机制 传输层的流量控制包括窗口控制 拥塞控制 流量整形  
> 传输层的协议和标准包括TCP UDP SCTP DCCP等

会话层(Session Layer)
> 会话层是网络七层架构中的第五层 这一层负责建立 维持和终止应用程序之间的会话 包括对话的建立和终止 以及数据交换的时序和同步  
> 会话层的主要功能有 会话建立 会话维持 会话终止 数据交换 时序和同步 会话层的地址包括会话ID和会话密钥   
> 会话建立和终止有四种请求和响应: 会话建立请求 会话建立响应 会话终止请求 会话终止响应

表示层(Presentation Layer)
> 表示层是网络七层架构中的第六层 这一层负责将应用程序的数据转换为一种标准的格式 以便在网络中传输  
> 表示层的主要功能有 数据转换 压缩 加密 解密 格式转换 表示层网关和表示层代理 是表示层的重要设备
> 表示层的数据转换包括数据编解码和数据转换算法等表示层的压缩包括数据压缩 解压算法和压缩比等 表示层的加密包括加密算法 解密算法和密钥管理等

应用层(Application Layer)
> 应用层是网络七层架构中的第七层 也是最高层 这一层负责为应用程序提供网络服务  
> 应用程序通信 数据传输 网络服务 协议支持 应用程序接口 是应用层的主要功能  
> 应用层的协议和标准包括HTTP FTP SMTP DNS SNMP等

## 从link开始 HUB-交换机

网络要实现的最基础的功能就是link 链接  
链接 最简单的方式是什么呢? 当然是找根能传递数据的线 直接连上两台电脑咯  
问题是 当设备很多的时候 所需的线就会过多 无论是有线还是无线链接 点对点的连接方式太过于低效和复杂
![当没有HUB时的链接](\images\posts2025041801\NOHUB.png)
HUB作为最基本的网络设备之一 能够连接多台计算机 实现它们之间的数据通信  
优雅的HUB:
![优雅のHUB](\images\posts2025041801\NICEHUB.png)
HUB的工作原理非常简单直接 就是将所有的端口全部绑在一起 当A要发信息给B时 只需要找HUB做中间商就行了  
通过将接收到的数据包广播到所有连接的设备上 实现数据的传输  

HUB通常用于小型网络环境中 例如家庭网络或小型办公室网络 能够提供基本的网络连接功能  
但是 HUB也有一些不可避免的缺点  
首先 HUB工作在物理层 不能对数据包进行识别和处理 因此数据包会被广播到所有连接的设备上 这不仅浪费了带宽 还可能导致网络隐私问题  
如图 A要发消息给B 结果所有人都收到了消息 甚至包括A自己 隐私安全无法保障 还白白浪费带宽  
其次 HUB不能同时并行处理上下行传输 想象一下 你不能在看视频时和朋友聊天 也没法和朋友打电话 这种感觉糟透了
![不优雅のHUB](\images\posts2025041801\BADHUB.png)
为了解决HUB的这些缺点 交换机应运而生 交换机可以智能地识别和处理数据包 减少冲突 提高网络效率  
它可以根据数据包的目的MAC地址 准确地将数据包发送到目标设备 这大大减少了数据包的广播 提高了网络的安全性和效率
![优雅の交换机](\images\posts2025041801\BETTERSWITCH.png)
有了交换机 并行处理数据 点对点传输数据不再是问题  
交换机实现单独发送的原理是MAC地址 MAC地址通常以12个十六进制数表示 就是48位的二进制数  
16进制数的范围从00到FF 0A:1B:2C:3D:4E:5F 是一个典型的MAC地址 设备的MAC地址是唯一的  
通过寻找MAC地址 交换机就可以得知各个设备分别是谁 然后点对点发送信息  
现在 交换机会和路由器一起工作

## 路由器介绍

路由器是一种网络设备 能够连接多个网络 实现不同网络之间的数据通信  
这里我们搬出上次的访问网站流程的图解 看看路由器的作用
![神奇の路由器](\images\posts2025041801\Router.png)
可以看到 路由器(与交换机一起 但是这里主要介绍路由器)承担了连接局域网和外部网络选择转发或路由的功能  
路由是指确定数据包从源设备到目的设备的最佳路径的过程 说白了就是查导航  
转发是指将数据包从一个网络设备转发到另一个网络设备的过程 比如上篇文章提到的 将访问请求转发给DNS服务器 或是将网站服务器的返回值转发回电脑 说白了就是跟导航走  

## 路由器功能

哪些功能是路由器负责的呢? 很明显 家庭网络中 路由器作为网络层的设备  
可以 提供互联网接入 连接多个设备 路由&转发 还有一些安全功能  
我们可以进入路由器后台查看和控制路由器功能 你可以在这里更改一些关键性设置和路由器功能 一般的路由器管理IP为192.168.X.X
Windows下 按下win+R 输入 cmd 进入终端 输入 ipconfig 找到最后一项默认网关界面 复制 粘贴到浏览器中访问即可进入路由器设置

## 路由器控制与管理

知道了如何进入路由器后台 我们来看看路由器中的常用设置 了解他们的用处  
让我们看看一般路由器的管理  
输入管理员密码(WI-FI密码)登录到路由器的后台管理界面  
在这里 你可以看到一般的几项WI-FI设置 首先是无线设置  
无线设置中 你可以修改WI-FI的名称以及密码  
以下是一些常用选项的介绍 也是大多数路由器都具备的功能  
**基础设置**
> 双频(2.4G/5G)二合一 : 合并2.4G和5G频段 优点是只需要一个WI-FI名称/密码 可以智能切换 兼顾效率和传输距离 缺点是切换能非常智能是不可能的 而且切换还会多少有一点丢包  
>
> 信道 : 是指在无线通信系统中 用于传输数据的特定频率范围 新手不建议设置 AUTO自动就好了  
>
> IP方式 : 动态获取DHCP和手动方式静态IP是两种用于配置网络设备的IP地址的方法 DHCP较为方便 灵活 缺点是不稳定 手动方式优点是稳定 安全 缺点是复杂且缺乏灵活性 家庭网络更适合DHCP动态分配  
**接入用户控制 : 最重要的控制**
> 简单讲一下接入控制  
>
> 接入控制 可以控制所有接入WI-FI下的设备 有两种模式  
> 黑名单模式 : 屏蔽特定的MAC地址设备 不允许他们连接你家的WI-FI  
> 白名单模式 : 仅允许特定的AMC地址设备连接你家的WI-FI  
>
> 如果你遇到有人蹭你家的网 最好的解决方式就是更改密码+使用白名单模式 然后把所有你家的设备的MAC地址全部写进白名单 虽然看起来比较简单粗暴 但是很多使用软路由的人也在使用这个方法来最大程度保证网络安全和防止自家的带宽被别人蹭  
>
> 还有一个小功能 没有黑白名单那样粗暴 就是Wi-Fi接入控制列表可以控制现在正在连接网络的设备 缺点是不能很好的解决问题  
> 如果你想恶心一些蹭网的人 你可以在别人蹭网的时候 给他一个网速限制 你可以限制他的网速到30kb 这样的网速他看网页都困难 然后如果他恰好在手机上开启了智能切换WI-FI和移动数据 那么他就会白白地浪费流量 要么就是加载网页都困难  
**定时设置**
> Wi-Fi定时关闭功能可以省下一笔电费 比如你可以设置在凌晨0点到凌晨5点WI-FI关闭 这可以使得路由器在这个时间段关闭发送WI-FI的功能  
>
> Wi-F休眠功能可以让WI-FI在两小时内没有设备连接时 自动让路由器休眠 优点和上面一样 省电 缺点是休眠模式下 可能需要靠近连接Wi-Fi以唤醒设备

## DNS服务器是什么?

如果你遇到了能打开某些软件(比如QQ) 但是网页访问不了  
这种情况 你去网上一搜索 发现卡加都说是DNS配置问题 那么能否具体一点呢  
我将从原理处为你分析DNS域名污染发生的原因 如何解决DSN域名污染以及如何预防类似的问题  

**IP**  
> IP地址是一种虚拟地址 IP地址可以让你在互联网中精准的找到网站服务器 IP地址的格式是XXX.XXX.XXX.XXX 其中XXX代表0-255的任意数字  
>
> 请注意 这是指IPV4地址而不是IPV6地址 至于这些玩意的区别 我将在下一篇文章中阐明  
>
> 现在你只需知道IP地址如同手机号码一般 指向某个在互联网中唯一的设备就行了

**DNS服务器**  
DNS服务器Domain Name System Server是一种计算机服务器 负责将域名解析为IP地址 以便计算机可以访问相应的网站或资源  
它就像一个电话簿 只不过查找到不是电话而是IP地址  
让我们以访问Google为例，来了解DNS服务器的作用
> 用户在浏览器中输入谷歌的域名 : www.google.com  
> 浏览器将DNS查询发送给路由器 路由器再转发给本地的DNS服务器 DNS查询内容 www.google.com  
> 本地DNS服务器将DNS查询发送到根DNS服务器Root DNS Server 根DNS服务器负责管理顶级域名TLD的DNS记录  
> 根DNS服务器将DNS查询发送到负责.com顶级域名的顶级域名服务器TLD Server  
> 顶级域名服务器将DNS查询发送到负责google.com域名的权威DNS服务器Authoritative DNS Server  
> DNS根服务器返回谷歌的IP地址 : 216.239.36.10  
> 本地DNS服务器缓存谷歌的IP地址 以便下次访问时可以直接返回IP地址
通过以上内容不难发现 简化过程后 就变成了 将网站发给DNS服务器→ DNS服务器找到IP地址→ DNS服务器返回IP地址给设备并且临时存储该网站的IP地址  
我们很多时候不会刻意地去记一个人的电话号码 而是在手机软件中进行备注  
同样的 我们访问Google的时候也不会直接在浏览器中输入216.239.36.10 IP地址相当的难记  
DNS服务器就是个电话簿 当你输入网址的时候 DNS服务器就会返回IP地址  

**hosts文件**
在Windows中 打开C:\Windows\System32\drivers\etc这个目录 你可以看到一个叫hosts的无后缀文件
{% highlight js %}
# Copyright (c) 1993-2009 Microsoft Corp.
#
# This is a sample HOSTS file used by Microsoft TCP/IP for Windows.
#
# This file contains the mappings of IP addresses to host names. Each
# entry should be kept on an individual line. The IP address should
# be placed in the first column followed by the corresponding host name.
# The IP address and the host name should be separated by at least one
# space.
#
# Additionally, comments (such as these) may be inserted on individual
# lines or following the machine name denoted by a '#' symbol.
#
# For example:
#
#      102.54.94.97     rhino.acme.com          # source server
#       38.25.63.10     x.acme.com              # x client host

# localhost name resolution is handled within DNS itself.
#	127.0.0.1       localhost
#	::1             localhost

{% endhighlight %}
可以看到 这个文件什么都没有写 因为#开头的是注释 计算机不会读取他们  
hosts文件是一个很关键的文件 你可以将一些网站对应的IP地址放进去  
比如我可以在里面写 216.239.36.10 google.com  
hosts文件的访问优先级更高 所以你访问Google时 系统检测到访问请求先检查hosts文件  
系统检测到hosts文件的内容后 例如你输入了google.com 此时系统会自动将google.com的通过hosts文件进行查询 发现了IP地址216.239.36.10后 系统不会再去问DNS服务器了 而是直接去访问216.239.36.10这个IP地址
但是hosts文件总有个头 不可能将所有的网站全部放进去 且就目前来看 更改hosts文件除了增加不稳定性以及在DNS服务器出事时临时救场 也没什么作用  

如果大家想看看网站的具体IP地址 可以到一些官方的DNS提供商那里去通过网址查询IP地址 例如[Google DNS](8.8.8.8)  
Windows下 你可以使用ipconfig/displaydns 命令来获取本地DNS服务器缓存 也可以用ipconfig/flushdns命令来刷新DNS缓存 如果你访问一些网站出现了某些疑难杂症 不妨尝试一下

## 什么是DNS劫持/污染?

刚刚我们说了DNS服务器的原理 那么能否解释为什么有一些客户端应用可以访问和聊天 但是网站访问不了呢  
很简单 因为诸如QQ这样的软件 不需要使用DNS服务器来找IP 一切都由腾讯管理好了  
而浏览器访问依然要经过DNS服务器的配置和查询IP的操作  

**DNS劫持与污染**
DNS劫持很好理解 简单讲就是你想访问Google.com 它的IP是216.239.36.10 但是现在DNS被第三方劫持了 此时你访问Google.com DNS服务器给你返回来一个错误的结果并把这个结果给了你 你自然就访问不了你想访问的网站了  
如果该DNS服务器被大批量污染 那么你可能就一个网站都访问不了了  
我们刚刚提到的救急的方法就是提前准备一些网站的IP备用 放在hosts文件中 或选择一个备用NDS服务器 我个人的DNS服务器就是Google的8.8.8.8  
在国内 我不建议你直接将DNS服务器设为Cloudflare的1.1.1.1或Google的8.8.8.8 这会影响到你访问国内网站的速度 长期在国外当我没说  
请注意 DNS劫持与DNS污染 属于违法行为 会被判处破坏计算机信息系统罪 请切勿尝试 法律风险自负

## 总结

今天 我们学习了两个方面的内容  
1. 什么是网络七层架构? 探索基础的网络架构 (ISO/OSI协议参考模型)
2. 路由器有哪些功能?  
3. DNS服务器是什么?  
这将会对你接下来所学习内容有所帮助  
在下一篇文章中 我将介绍:
> IP是什么? 为什么IP协议是目前最广泛使用的网络层协议?  
> 什么是网络代理?
希望本系列文章能帮助到你 谢谢

-----

参考资料/外链
[wiki百科 互联网](https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91)
[Google DNS](8.8.8.8)