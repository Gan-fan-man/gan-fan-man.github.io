/*
 * File: _code.scss
 * Description: This file defines styles for inline and block-level code snippets,
 * including adjustments for syntax highlighting from Pygments/Rouge and Gist embeds.
 */

// Importing variables for consistent styling.
@use "variables" as *;

// Base font styling for all code and preformatted text elements.
code,
pre {
  font-family: var(--code-font);
}

// Styles for inline code snippets.
code {
  font-size: 85%;
}

// Styles for block-level preformatted text.
pre {
  display: block;
  margin-top: 0;
  margin-bottom: var(--spacer-3);
  overflow: auto;
}

// Styles for syntax highlighted code blocks, typically generated by Pygments or Rouge.
.highlight {
  padding: var(--spacer);
  margin-bottom: var(--spacer);
  background-color: var(--code-bg);
  border-radius: var(--border-radius);

  // Removes bottom margin for 'pre' tags nested within a '.highlight' block.
  pre {
    margin-bottom: 0;
  }

  // Adjusts padding for nested highlight elements, often caused by triple backticks (code fencing).
  .highlight {
    padding: 0;
  }
}

// Styles for Rouge-generated code tables, often used for displaying line numbers with code.
.rouge-table {
  margin-bottom: 0;
  font-size: 100%;

  // Removes all borders from the table, its cells, and headers.
  &,
  td,
  th {
    border: 0;
  }

  // Styles for the gutter column, which typically contains line numbers.
  .gutter {
    vertical-align: top;
    user-select: none;
    opacity: .25;
  }
}

// Specific styling adjustments for Gist embeds from GitHub Pages.
.gist .markdown-body {
  padding: 15px !important;
}

// Styles for inline plaintext code highlighted by Rouge.
code.language-plaintext.highlighter-rouge {
  background-color: #CBCBDC;
  color: #3C3C48;
  border-radius: 3px;
  padding: 0.2em 0.4em;
}

// Media query to apply dark mode styles based on user's color scheme preference.
@media (prefers-color-scheme: dark) {
  // Dark mode styles for inline plaintext code highlighted by Rouge.
  code.language-plaintext.highlighter-rouge {
    background-color: #3C3C48;
    color: #CBCBDC;
    border-radius: 3px;
    padding: 0.2em 0.4em;
  }
}